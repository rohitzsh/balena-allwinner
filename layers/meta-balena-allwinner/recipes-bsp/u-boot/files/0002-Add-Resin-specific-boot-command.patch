From ac31893ff0a384e5ca338ed497d7f4371a065a11 Mon Sep 17 00:00:00 2001
From: Rohit Sharma <rohit.sharma@r2p.com>
Date: Mon, 13 Feb 2023 10:58:15 +0100
Subject: [PATCH 2/3] Add Resin specific boot command

Upstream-Status: Inappropriate [Resin specific]

Signed-off-by: Rohit Sharma <rohitsharmanotify@gmail.com>
---
 include/configs/sunxi-common.h | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/include/configs/sunxi-common.h b/include/configs/sunxi-common.h
index 7b602dd9ea..fed5e0c8d7 100644
--- a/include/configs/sunxi-common.h
+++ b/include/configs/sunxi-common.h
@@ -392,7 +392,15 @@ extern int soft_i2c_gpio_scl;
 #endif
 
 #include <config_distro_bootcmd.h>
-
+#undef CONFIG_BOOTCOMMAND
+#define CONFIG_BOOTCOMMAND \
+	"setenv resin_kernel_load_addr ${kernel_addr_r};" \
+	"run resin_set_kernel_root;" \
+	"setenv bootargs ${resin_kernel_root} rootfstype=ext4 rootwait console=$console;" \
+	"fatload ${resin_dev_type} ${resin_dev_index}:${resin_boot_part} ${resin_kernel_load_addr} uimage;" \
+	"fatload ${resin_dev_type} ${resin_dev_index}:${resin_boot_part} ${fdt_addr_r} dtb/${fdtfile};" \
+	"bootm ${resin_kernel_load_addr} - ${fdt_addr_r}"
+ 
 #ifdef CONFIG_USB_KEYBOARD
 #define CONSOLE_STDIN_SETTINGS \
 	"stdin=serial,usbkbd\0"
-- 
2.39.1

