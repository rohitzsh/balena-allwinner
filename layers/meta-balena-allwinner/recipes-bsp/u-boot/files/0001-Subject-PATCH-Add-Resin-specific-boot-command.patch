From cd0a982b51e055dbb0a020aee1e4e0da8050d221 Mon Sep 17 00:00:00 2001
From: Rohit Sharma <rohit.sharma@r2p.com>
Date: Fri, 10 Feb 2023 07:08:19 +0100
Subject: [PATCH 1/2] Subject: [PATCH] Add Resin specific boot command

Upstream-Status: Inappropriate [Resin specific]

Signed-off-by: Rohit Sharma <rohitsharmanotify@gmail.com>
---
 include/configs/sunxi-common.h | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/include/configs/sunxi-common.h b/include/configs/sunxi-common.h
index e89ad42ce8..60df72fbb1 100644
--- a/include/configs/sunxi-common.h
+++ b/include/configs/sunxi-common.h
@@ -284,6 +284,14 @@
 #endif
 
 #include <config_distro_bootcmd.h>
+#undef CONFIG_BOOTCOMMAND
+#define CONFIG_BOOTCOMMAND \
+	"setenv resin_kernel_load_addr ${kernel_addr_r};" \
+	"run resin_set_kernel_root;" \
+	"setenv bootargs ${resin_kernel_root} rootfstype=ext4 rootwait console=$console;" \
+	"fatload ${resin_dev_type} ${resin_dev_index}:${resin_boot_part} ${resin_kernel_load_addr} uimage;" \
+	"fatload ${resin_dev_type} ${resin_dev_index}:${resin_boot_part} ${fdt_addr_r} dtb/${fdtfile};" \
+	"bootm ${resin_kernel_load_addr} - ${fdt_addr_r}"
 
 #ifdef CONFIG_USB_KEYBOARD
 #define CONSOLE_STDIN_SETTINGS \
-- 
2.20.1

